package {	import flash.events.Event;	import flash.events.MouseEvent;	import flash.display.MovieClip;	public class ToggleSwitch extends MovieClip {		private var _onState:Boolean = false;		public static const END_ANIMATION:String = "ToggleSwitchEndAnimation";		public function ToggleSwitch() {			stop();			this.addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);		}		public function toggleIt() {			_onState = ! _onState;			if (_onState) {				gotoAndStop("switchOn");			} else {				gotoAndStop("switchOff");			}			dispatchEvent(new MouseEvent(END_ANIMATION));		}		private function onAddedToStage(event:Event):void {			this.addEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage);			this.addEventListener(MouseEvent.MOUSE_OVER, onMouseOver);			this.addEventListener(MouseEvent.CLICK, onMouseClick);			this.removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);		}		private function onRemovedFromStage(event:Event):void {			this.removeEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage);			this.removeEventListener(MouseEvent.CLICK, onMouseClick);			this.removeEventListener(MouseEvent.MOUSE_OVER, onMouseOver);		}		private function onMouseOver(event:MouseEvent):void {			this.buttonMode = true;		}		private function onMouseClick(event:MouseEvent):void {			_onState = ! _onState;			if (_onState) {				gotoAndStop("switchOn");			} else {				gotoAndStop("switchOff");			}		}		public function switchState():Boolean {			return _onState;		}	}}